# OneMonitor - 企业级一体化运维监控平台

OneMonitor 是一款企业级的一体化运维监控平台，致力于为企业提供全面、高效、智能的 IT 基础设施和业务系统监控解决方案。

## 🌟 项目亮点

- **一体化监控**：覆盖传统 IT 基础设施、云平台、容器化环境和业务系统
- **实时监控**：毫秒级数据采集和实时告警通知
- **智能分析**：AI 驱动的异常检测和预测性维护
- **可视化大屏**：丰富的图表和自定义仪表盘
- **高可扩展性**：模块化架构，支持灵活扩展监控能力
- **安全可靠**：企业级安全设计，数据加密传输和存储

## 🛠️ 技术栈

### 后端
- **Python 3.10+**：强大的编程语言
- **FastAPI**：高性能的异步 Web 框架
- **SQLAlchemy**：ORM 框架，支持多种数据库
- **Redis**：缓存和实时数据处理
- **Celery**：分布式任务队列
- **Prometheus**：时序数据采集和存储

### 前端
- **Vue 3**：渐进式 JavaScript 框架
- **Element Plus**：企业级 UI 组件库
- **ECharts**：数据可视化图表库
- **Axios**：HTTP 客户端
- **Vue Router**：路由管理
- **Pinia**：状态管理

### 监控引擎
- **Telegraf**：多源数据采集代理
- **Grafana**：高级可视化集成
- **Alertmanager**：告警管理和通知

## 📋 功能特性

### 1. 传统 IT 基础设施监控
- 机房环境监控（温度、湿度、UPS、精密空调）
- 服务器监控（CPU、内存、磁盘、网络、进程）
- 网络设备监控（交换机、路由器、防火墙、负载均衡）
- 存储设备监控（磁盘阵列、磁带库、存储网络）
- 安全设备监控（IDS/IPS、WAF、VPN、防病毒）

### 2. 云平台监控
- 阿里云/腾讯云/华为云 资源监控
- 云服务器、云数据库、云存储监控
- 云原生服务监控（云函数、容器服务）
- 云账单和成本监控

### 3. 容器化环境监控
- Kubernetes 集群监控
- Pod、Node、Service 监控
- 容器资源使用率监控
- 应用性能监控（APM）
- 日志聚合和分析

### 4. 业务系统监控
- 应用健康状态监控
- API 性能和可用性监控
- 数据库性能监控
- 事务追踪和分析
- 用户体验监控（RUM）

### 5. 告警管理
- 多维度告警规则配置
- 告警级别和通知策略
- 告警抑制和聚合
- 告警升级和认领机制
- 告警历史和统计分析

### 6. 报表和分析
- 自定义报表生成
- 趋势分析和预测
- 容量规划和优化建议
- 合规性报告

## 🏗️ 架构设计

### 系统架构
```
┌───────────────────────────────────────────────────────────────────┐
│                          用户层                                  │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────────┐  │
│  │  Web 界面   │  │  移动端APP  │  │  API 调用 (第三方系统)   │  │
│  └─────────────┘  └─────────────┘  └─────────────────────────┘  │
└─────────────────────────────┬───────────────────────────────────┘
                              │
┌─────────────────────────────▼───────────────────────────────────┐
│                          接入层                                  │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────────┐  │
│  │  API 网关   │  │  负载均衡   │  │  认证授权服务           │  │
│  └─────────────┘  └─────────────┘  └─────────────────────────┘  │
└─────────────────────────────┬───────────────────────────────────┘
                              │
┌─────────────────────────────▼───────────────────────────────────┐
│                          服务层                                  │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────────┐  │
│  │  监控服务   │  │  告警服务   │  │  数据分析服务           │  │
│  ├─────────────┤  ├─────────────┤  ├─────────────────────────┤  │
│  │  配置服务   │  │  报表服务   │  │  日志管理服务           │  │
│  └─────────────┘  └─────────────┘  └─────────────────────────┘  │
└─────────────────────────────┬───────────────────────────────────┘
                              │
┌─────────────────────────────▼───────────────────────────────────┐
│                          数据层                                  │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────────┐  │
│  │  时序数据库 │  │  关系数据库 │  │  缓存数据库             │  │
│  │  (Prometheus)│  │  (PostgreSQL)│  │  (Redis)               │  │
│  ├─────────────┤  ├─────────────┤  ├─────────────────────────┤  │
│  │  日志存储   │  │  告警存储   │  │  配置存储               │  │
│  │  (Elasticsearch)│  │  (InfluxDB)│  │  (Consul)             │  │
│  └─────────────┘  └─────────────┘  └─────────────────────────┘  │
└─────────────────────────────┬───────────────────────────────────┘
                              │
┌─────────────────────────────▼───────────────────────────────────┐
│                          采集层                                  │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────────┐  │
│  │  传统设备采集│  │  云平台采集 │  │  容器环境采集           │  │
│  │  (SNMP/IPMI)│  │  (API)       │  │  (Prometheus/K8s API)  │  │
│  ├─────────────┤  ├─────────────┤  ├─────────────────────────┤  │
│  │  业务系统采集│  │  日志采集   │  │  APM 数据采集          │  │
│  │  (HTTP/SDK) │  │  (Filebeat)  │  │  (Jaeger)              │  │
│  └─────────────┘  └─────────────┘  └─────────────────────────┘  │
└───────────────────────────────────────────────────────────────────┘
```

### 核心模块

1. **监控采集模块**：负责从各种数据源采集监控数据
2. **数据处理模块**：对采集的数据进行清洗、聚合和分析
3. **告警管理模块**：基于规则的告警触发和通知
4. **可视化模块**：提供丰富的数据可视化界面
5. **配置管理模块**：管理监控对象和规则配置
6. **报表分析模块**：生成各种监控报表和分析

## 🚀 快速开始

### 环境要求

- Python 3.10+
- Node.js 16+
- PostgreSQL 13+
- Redis 6+
- Prometheus 2.30+
- Docker (可选，用于容器化部署)

### 安装部署

#### 1. 后端部署

```bash
# 克隆项目
git clone https://github.com/your-org/onemonitor.git
cd onemonitor/backend

# 创建虚拟环境
python -m venv venv
source venv/bin/activate  # Linux/Mac
# 或 venv\Scripts\activate  # Windows

# 安装依赖
pip install -r requirements.txt

# 配置环境变量
cp .env.example .env
# 编辑 .env 文件，配置数据库连接等信息

# 数据库迁移
alembic upgrade head

# 启动服务
uvicorn app.main:app --host 0.0.0.0 --port 8000
```

#### 2. 前端部署

```bash
cd onemonitor/frontend

# 安装依赖
npm install

# 配置环境变量
cp .env.example .env
# 编辑 .env 文件，配置 API 地址等信息

# 开发模式启动
npm run dev

# 生产构建
npm run build
# 构建产物将生成在 dist 目录
```

#### 3. 使用 Docker 部署

```bash
# 构建镜像
docker-compose build

# 启动服务
docker-compose up -d
```

## 📖 使用指南

### 1. 初始化配置

1. 访问 Web 界面 (默认: http://localhost:5173)
2. 使用默认账号密码登录 (admin/admin123)
3. 修改默认密码
4. 配置邮件服务器等基础信息

### 2. 添加监控对象

1. 进入「监控管理」→「监控对象」
2. 选择监控类型（服务器、网络设备、云资源等）
3. 填写监控对象信息和采集参数
4. 保存并启用监控

### 3. 配置告警规则

1. 进入「告警管理」→「告警规则」
2. 创建告警规则，设置监控指标、阈值和通知方式
3. 配置告警通知渠道（邮件、短信、微信等）
4. 启用告警规则

### 4. 查看监控数据

1. 进入「仪表盘」查看实时监控数据
2. 进入「监控视图」查看历史趋势
3. 进入「报表中心」生成监控报表

## 📊 监控指标

### 服务器监控指标
- CPU 使用率、负载、上下文切换
- 内存使用率、缓存、交换分区
- 磁盘使用率、I/O 吞吐量、响应时间
- 网络流量、连接数、丢包率
- 进程状态、资源占用

### 网络设备监控指标
- 接口流量、错误包率
- CPU 使用率、内存使用率
- 设备温度、风扇状态
- 路由表、ARP 表
- 连接状态、会话数

### 云平台监控指标
- 云服务器 CPU、内存、磁盘
- 云数据库连接数、查询性能
- 云存储使用率、IOPS
- 云函数调用次数、错误率
- 网络带宽、延迟

### Kubernetes 监控指标
- 集群资源使用率
- Node CPU、内存、磁盘
- Pod 状态、资源使用
- Service 流量、响应时间
- 容器日志、事件

## 🔧 开发指南

### 后端开发

```bash
# 安装开发依赖
pip install -r requirements-dev.txt

# 运行测试
pytest

# 代码格式化
black .

# 代码检查
flake8 .
```

### 前端开发

```bash
# 运行测试
npm test

# 代码格式化
npm run lint

# 单元测试
npm run test:unit
```

## 🤝 贡献指南

1. Fork 本项目
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 提交 Pull Request

## 📄 许可证

本项目采用 Apache License 2.0 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 📞 联系方式

- 项目官网：[https://onemonitor.io](https://onemonitor.io)
- 文档中心：[https://docs.onemonitor.io](https://docs.onemonitor.io)
- 社区论坛：[https://community.onemonitor.io](https://community.onemonitor.io)
- 邮箱：hpux_ljf@163.com
- 微信：LI_JianFa

## 🙏 致谢

感谢所有为 OneMonitor 项目做出贡献的开发者和用户！

---

**OneMonitor** - 让运维更简单，让监控更智能！ 🚀