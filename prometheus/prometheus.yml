global:
  scrape_interval:     15s # 默认采集间隔
  evaluation_interval: 15s # 默认规则评估间隔

# 告警规则文件
rule_files:
  - "rules/*.yml"

# 监控目标配置
scrape_configs:
  # 监控Prometheus自身
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # 监控Alertmanager
  - job_name: 'alertmanager'
    static_configs:
      - targets: ['alertmanager:9093']

  # 监控Grafana
  - job_name: 'grafana'
    static_configs:
      - targets: ['grafana:3000']

  # 监控OneMonitor后端
  - job_name: 'onemonitor-backend'
    static_configs:
      - targets: ['backend:8000']

  # 监控节点 exporters (需单独部署)
  - job_name: 'node_exporter'
    static_configs:
      - targets: ['node_exporter:9100']

  # 监控PostgreSQL (需单独部署)
  - job_name: 'postgresql_exporter'
    static_configs:
      - targets: ['postgresql_exporter:9187']

  # 监控Redis (需单独部署)
  - job_name: 'redis_exporter'
    static_configs:
      - targets: ['redis_exporter:9121']